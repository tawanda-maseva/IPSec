// Design notes for the lab, explaining purpose of configs.

// Security policies are stateful in nature. So when Host1 pings Host2, in SRX1, allows this via VPN-OUT. Return traffic is
	automatically permitted. So VPN-IN is not used. 
	SRX2, on the other hand, allows the ping from Host1 through policy VPN-IN. Return traffic (i.e. Host2's replies) are 
	automatically allowed - so VPN-OUT is not used.
jcluser@vSRX1> show security flow session    
	Session ID: 411, Policy name: VPN-OUT/5, State: Stand-alone, Timeout: 2, Valid
	  In: 10.100.11.2/49183 --> 10.100.22.2/329;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.22.2/329 --> 10.100.11.2/49183;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 	

	Session ID: 412, Policy name: VPN-OUT/5, State: Stand-alone, Timeout: 2, Valid
	  In: 10.100.11.2/49183 --> 10.100.22.2/330;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.22.2/330 --> 10.100.11.2/49183;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 	

	Session ID: 413, Policy name: VPN-OUT/5, State: Stand-alone, Timeout: 4, Valid
	  In: 10.100.11.2/49183 --> 10.100.22.2/331;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.22.2/331 --> 10.100.11.2/49183;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 

jcluser@vSRX2> show security flow session    
	Session ID: 615, Policy name: VPN-IN/7, State: Stand-alone, Timeout: 2, Valid
	  In: 10.100.11.2/49183 --> 10.100.22.2/538;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.22.2/538 --> 10.100.11.2/49183;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 	

	Session ID: 616, Policy name: VPN-IN/7, State: Stand-alone, Timeout: 2, Valid
	  In: 10.100.11.2/49183 --> 10.100.22.2/539;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.22.2/539 --> 10.100.11.2/49183;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 	

	Session ID: 617, Policy name: VPN-IN/7, State: Stand-alone, Timeout: 4, Valid
	  In: 10.100.11.2/49183 --> 10.100.22.2/540;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.22.2/540 --> 10.100.11.2/49183;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 


// If Host2 pings Host1, the reverse applies i.e. SRX2 will use VPN-OUT while SRX1 will use VPN-IN. Hence in both SRX1 and SRX2,
	we must configure VPN-IN and VPN-OUT as if the security policies are stateless. Below are the session tables when Host1 pings
	Host2 and Host2 pings Host1 simultaneosly. Notice that both the SRXs uses VPN-IN and VPN-OUT simultaneosly.
jcluser@vSRX1> show security flow session    
	Session ID: 1282, Policy name: VPN-OUT/5, State: Stand-alone, Timeout: 2, Valid
	  In: 10.100.11.2/49183 --> 10.100.22.2/933;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.22.2/933 --> 10.100.11.2/49183;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 	

	Session ID: 1283, Policy name: VPN-IN/7, State: Stand-alone, Timeout: 2, Valid
	  In: 10.100.22.2/62239 --> 10.100.11.2/267;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.11.2/267 --> 10.100.22.2/62239;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 	

	Session ID: 1284, Policy name: VPN-OUT/5, State: Stand-alone, Timeout: 2, Valid
	  In: 10.100.11.2/49183 --> 10.100.22.2/934;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.22.2/934 --> 10.100.11.2/49183;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 	

	Session ID: 1285, Policy name: VPN-IN/7, State: Stand-alone, Timeout: 2, Valid
	  In: 10.100.22.2/62239 --> 10.100.11.2/268;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.11.2/268 --> 10.100.22.2/62239;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 	

	Session ID: 1286, Policy name: VPN-OUT/5, State: Stand-alone, Timeout: 4, Valid
	  In: 10.100.11.2/49183 --> 10.100.22.2/935;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.22.2/935 --> 10.100.11.2/49183;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 

jcluser@vSRX2> show security flow session    
	Session ID: 1403, Policy name: VPN-IN/7, State: Stand-alone, Timeout: 2, Valid
	  In: 10.100.11.2/49183 --> 10.100.22.2/996;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.22.2/996 --> 10.100.11.2/49183;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 	

	Session ID: 1404, Policy name: VPN-OUT/5, State: Stand-alone, Timeout: 2, Valid
	  In: 10.100.22.2/62239 --> 10.100.11.2/330;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.11.2/330 --> 10.100.22.2/62239;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 	

	Session ID: 1405, Policy name: VPN-IN/7, State: Stand-alone, Timeout: 2, Valid
	  In: 10.100.11.2/49183 --> 10.100.22.2/997;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.22.2/997 --> 10.100.11.2/49183;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 	

	Session ID: 1406, Policy name: VPN-OUT/5, State: Stand-alone, Timeout: 2, Valid
	  In: 10.100.22.2/62239 --> 10.100.11.2/331;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.11.2/331 --> 10.100.22.2/62239;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 	

	Session ID: 1407, Policy name: VPN-IN/7, State: Stand-alone, Timeout: 4, Valid
	  In: 10.100.11.2/49183 --> 10.100.22.2/998;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.22.2/998 --> 10.100.11.2/49183;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 	

	Session ID: 1408, Policy name: VPN-OUT/5, State: Stand-alone, Timeout: 4, Valid
	  In: 10.100.22.2/62239 --> 10.100.11.2/332;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.11.2/332 --> 10.100.22.2/62239;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 	

	Session ID: 1409, Policy name: VPN-IN/7, State: Stand-alone, Timeout: 4, Valid
	  In: 10.100.11.2/49183 --> 10.100.22.2/999;icmp, Conn Tag: 0x0, If: st0.0, Pkts: 1, Bytes: 84, 
	  Out: 10.100.22.2/999 --> 10.100.11.2/49183;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 


// For host1 to reach the internet e.g. 172.32.13.2/30 on oobhr, we need SNAT at SRX1. SRX1 uses trust-to-internet-any policy 
	to permit this. SRX2 uses it's host-inbound policy to permit this.
jcluser@vSRX1> show security flow session    
	Session ID: 3503, Policy name: trust-to-internet-any/4, State: Stand-alone, Timeout: 2, Valid
	  In: 10.100.11.2/36640 --> 172.32.13.2/1;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 
	  Out: 172.32.13.2/1 --> 172.32.13.1/22507;icmp, Conn Tag: 0x0, If: ge-0/0/1.0, Pkts: 1, Bytes: 84, 	

	Session ID: 3504, Policy name: trust-to-internet-any/4, State: Stand-alone, Timeout: 2, Valid
	  In: 10.100.11.2/36640 --> 172.32.13.2/2;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 
	  Out: 172.32.13.2/2 --> 172.32.13.1/12751;icmp, Conn Tag: 0x0, If: ge-0/0/1.0, Pkts: 1, Bytes: 84, 	

	Session ID: 3505, Policy name: trust-to-internet-any/4, State: Stand-alone, Timeout: 4, Valid
	  In: 10.100.11.2/36640 --> 172.32.13.2/3;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 
	  Out: 172.32.13.2/3 --> 172.32.13.1/27146;icmp, Conn Tag: 0x0, If: ge-0/0/1.0, Pkts: 1, Bytes: 84, 	

	Session ID: 3506, Policy name: trust-to-internet-any/4, State: Stand-alone, Timeout: 4, Valid
	  In: 10.100.11.2/36640 --> 172.32.13.2/4;icmp, Conn Tag: 0x0, If: ge-0/0/0.0, Pkts: 1, Bytes: 84, 
	  Out: 172.32.13.2/4 --> 172.32.13.1/18083;icmp, Conn Tag: 0x0, If: ge-0/0/1.0, Pkts: 1, Bytes: 84, 

jcluser@vSRX2> show security flow session    
	Session ID: 3597, Policy name: self-traffic-policy/1, State: Stand-alone, Timeout: 2, Valid
	  In: 172.32.13.1/6218 --> 172.32.13.2/106;icmp, Conn Tag: 0x0, If: ge-0/0/1.0, Pkts: 1, Bytes: 84, 
	  Out: 172.32.13.2/106 --> 172.32.13.1/6218;icmp, Conn Tag: 0x0, If: .local..0, Pkts: 1, Bytes: 84, 	

	Session ID: 3598, Policy name: self-traffic-policy/1, State: Stand-alone, Timeout: 2, Valid
	  In: 172.32.13.1/4823 --> 172.32.13.2/107;icmp, Conn Tag: 0x0, If: ge-0/0/1.0, Pkts: 1, Bytes: 84, 
	  Out: 172.32.13.2/107 --> 172.32.13.1/4823;icmp, Conn Tag: 0x0, If: .local..0, Pkts: 1, Bytes: 84, 	

	Session ID: 3599, Policy name: self-traffic-policy/1, State: Stand-alone, Timeout: 4, Valid
	  In: 172.32.13.1/18825 --> 172.32.13.2/108;icmp, Conn Tag: 0x0, If: ge-0/0/1.0, Pkts: 1, Bytes: 84, 
	  Out: 172.32.13.2/108 --> 172.32.13.1/18825;icmp, Conn Tag: 0x0, If: .local..0, Pkts: 1, Bytes: 84, 